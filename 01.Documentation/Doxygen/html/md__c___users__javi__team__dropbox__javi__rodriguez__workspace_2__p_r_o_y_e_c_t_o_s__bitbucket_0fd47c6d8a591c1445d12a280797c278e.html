<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Battery doc: Heath Monitor</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Battery doc
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md__c___users__javi__team__dropbox__javi__rodriguez__workspace_2__p_r_o_y_e_c_t_o_s__bitbucket_0fd47c6d8a591c1445d12a280797c278e.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Heath Monitor </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >Esta libreria trata la clase <em>HelathMonitor</em> . Esta clase permita la monitorizacion o seguinto de una señal, permitiendo lanzar una alarma si dicha señal se mantiene por encima de un umbral durante un determinado tiempo, mediante la implementacion del algotimo de <em>pediente de subida pendiente de bajada</em> .</p>
<h1><a class="anchor" id="autotoc_md60"></a>
Metodos</h1>
<ul>
<li><p class="startli">Constructor. <em><b><a class="el" href="class_health_monitor.html">HealthMonitor( Umbral, valor de incremento, valor de decremento, limite del contador)</a></b></em></p>
<p class="startli">Para la programacion de estos obetos es necesario tener en cuenta la siguiente formula de la que se puede desgranar cada uno de las variables. Para ello hay que definicir dos constantes previas:</p><ul>
<li>Tiempo de muestreo.</li>
<li><p class="startli">Tiempo tras el que salta la alarma.</p>
<p class="startli">Con ello podemos aplicar la siguiente formula: </p><pre class="fragment">Limite del contador = valor de incremento * (Tiempo de alarma/Tiempo de muestreo)    
</pre><p> Jugando con estos valores se obtiene el limite del contador.</p>
</li>
</ul>
</li>
<li><em><b>setCounter(valor)</b></em>: Cambia el contador a un valor deseado. Tamaño 16 bits.</li>
<li><em><b>getCounter()</b></em>: Devuevle el valor del contador.</li>
<li><em><b>Check( sample )</b></em>: Funcion principal que compar ala muestra con el umbral y aumenta o decrementa el contador en funcion de si lo sobrepasa o no. Ademas comparará el contador con el limite y devovera una alarma si este es superado.</li>
<li><em><b>getSample( ADCpin )</b></em>: Devuelve una muestra obtenida del ADC pin indicado.</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md62"></a>
Test</h1>
<h2><a class="anchor" id="autotoc_md63"></a>
Test 0</h2>
<p >Este test inicializa un health monitor. El ciclo del programa se encargara de extraer una muestra del canal A1. Checkea la muestra y si salta la alrma se lanza un pulso de 10 ms por el pin A2. Paralelamente, por el puerto de salida analogica se esta muestreando el contador del health monitor.</p>
<ul>
<li>Para la creacion de la señal a muestrear, se utiliza la herramienta de LabView para la generacion de esta señal. El sketch mostrara un panel de control para modificar 2 señales senosoidales, 2 pulsos y el ruido. de menera que se imita la señal de la corriente, la frecuencia de la pulsacion deuna mano utilizando la maquina y los pulsos posibles errores de la señal que deberian lanzar la alarma del health monitor.</li>
</ul>
<p ><img src="image/controlpanel-labview.jpg" alt="Alternate text" title="Frecuencia del I2C en ARM" class="inline"/></p>
<p >Esta señal, se almacena en un excel. El cual se utilizara para la generacion de la señal con la yuda del Analog Discoery.</p>
<ul>
<li>WaveForm. Dentro del programa en la parte de WaveGen se selecciona Custom e Import.</li>
</ul>
<p ><img src="image/waveform-wavegen.jpg" alt="Alternate text" title="Frecuencia del I2C en ARM" class="inline"/></p>
<p >Seleccionando el excel previamente generado y configurando el separador y el simbolo decimal.</p>
<p >Una vez generada la señal y con las sonsas del ociloscopio colocadas correctamente:</p>
<p ><img src="image/osciloscope.jpeg" alt="Alternate text" title="Frecuencia del I2C en ARM" class="inline"/></p>
<p >Corroboramos el funcionamiento:</p>
<p ><img src="image/waveform-scope.jpg" alt="Alternate text" title="Frecuencia del I2C en ARM" class="inline"/></p>
<ul>
<li>Canal 1: Pin A0 ( Salida Analogica del ardunion con el "valor" del contador).</li>
<li>Canal 2: Señal muestreada del wavegen.</li>
<li>Canal digital 7: Pin A1 (Salida digital del arduino con el pulso de alarma.) </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3 </li>
  </ul>
</div>
</body>
</html>
