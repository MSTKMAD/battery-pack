\hypertarget{_emulate_e_e_p_r_o_m_8ino_source}{}\doxysection{Emulate\+EEPROM.\+ino}
\label{_emulate_e_e_p_r_o_m_8ino_source}\index{C:/Users/Javi/Team Dropbox/Javi Rodriguez/Workspace/2-\/PROYECTOS/Bitbucket/03-\/Battery Pack/bat\_sw/LIBRARIES/0012-\/batt\_FlashStorage/examples/EmulateEEPROM/EmulateEEPROM.ino@{C:/Users/Javi/Team Dropbox/Javi Rodriguez/Workspace/2-\/PROYECTOS/Bitbucket/03-\/Battery Pack/bat\_sw/LIBRARIES/0012-\/batt\_FlashStorage/examples/EmulateEEPROM/EmulateEEPROM.ino}}
\mbox{\hyperlink{_emulate_e_e_p_r_o_m_8ino}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_emulate_e_e_p_r_o_m_8ino_source_l00001}00001 \textcolor{comment}{/*}}
\DoxyCodeLine{\Hypertarget{_emulate_e_e_p_r_o_m_8ino_source_l00002}00002 \textcolor{comment}{  Demonstrate how to use FlashStorage with an API that is similar to the EEPROM library.}}
\DoxyCodeLine{\Hypertarget{_emulate_e_e_p_r_o_m_8ino_source_l00003}00003 \textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{_emulate_e_e_p_r_o_m_8ino_source_l00004}00004 \textcolor{comment}{  This example code is in the public domain.}}
\DoxyCodeLine{\Hypertarget{_emulate_e_e_p_r_o_m_8ino_source_l00005}00005 \textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{_emulate_e_e_p_r_o_m_8ino_source_l00006}00006 \textcolor{comment}{  Written by A. Christian}}
\DoxyCodeLine{\Hypertarget{_emulate_e_e_p_r_o_m_8ino_source_l00007}00007 \textcolor{comment}{  Edited 14 Oct 2016 by Cristian Maglie}}
\DoxyCodeLine{\Hypertarget{_emulate_e_e_p_r_o_m_8ino_source_l00008}00008 \textcolor{comment}{*/}}
\DoxyCodeLine{\Hypertarget{_emulate_e_e_p_r_o_m_8ino_source_l00009}00009 }
\DoxyCodeLine{\Hypertarget{_emulate_e_e_p_r_o_m_8ino_source_l00010}00010 \textcolor{comment}{// Include EEPROM-\/like API for FlashStorage}}
\DoxyCodeLine{\Hypertarget{_emulate_e_e_p_r_o_m_8ino_source_l00011}00011 \textcolor{preprocessor}{\#include <FlashAsEEPROM.h>}}
\DoxyCodeLine{\Hypertarget{_emulate_e_e_p_r_o_m_8ino_source_l00012}00012 }
\DoxyCodeLine{\Hypertarget{_emulate_e_e_p_r_o_m_8ino_source_l00013}\mbox{\hyperlink{_emulate_e_e_p_r_o_m_8ino_a4fc01d736fe50cf5b977f755b675f11d}{00013}} \textcolor{keywordtype}{void} \mbox{\hyperlink{_emulate_e_e_p_r_o_m_8ino_a4fc01d736fe50cf5b977f755b675f11d}{setup}}() \{}
\DoxyCodeLine{\Hypertarget{_emulate_e_e_p_r_o_m_8ino_source_l00014}00014   Serial.begin(9600);}
\DoxyCodeLine{\Hypertarget{_emulate_e_e_p_r_o_m_8ino_source_l00015}00015 }
\DoxyCodeLine{\Hypertarget{_emulate_e_e_p_r_o_m_8ino_source_l00016}00016   \textcolor{comment}{// If the EEPROM is empty then isValid() is false}}
\DoxyCodeLine{\Hypertarget{_emulate_e_e_p_r_o_m_8ino_source_l00017}00017   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{batt___flash_as_e_e_p_r_o_m_8cpp_a8c17b9f346b7ef4b4c79d467de251bec}{EEPROM}}.\mbox{\hyperlink{class_e_e_p_r_o_m_class_a450c24cc5879179cd3a821719456dad2}{isValid}}()) \{}
\DoxyCodeLine{\Hypertarget{_emulate_e_e_p_r_o_m_8ino_source_l00018}00018 }
\DoxyCodeLine{\Hypertarget{_emulate_e_e_p_r_o_m_8ino_source_l00019}00019     Serial.println(\textcolor{stringliteral}{"{}EEPROM is empty, writing some example data:"{}});}
\DoxyCodeLine{\Hypertarget{_emulate_e_e_p_r_o_m_8ino_source_l00020}00020     Serial.print(\textcolor{stringliteral}{"{}-\/>"{}});}
\DoxyCodeLine{\Hypertarget{_emulate_e_e_p_r_o_m_8ino_source_l00021}00021     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \mbox{\hyperlink{0003-_b_u_z_z_e_r_2examples_2_t_e_s_t__0_2_t_e_s_t__0_8ino_a752abcfe7ce5874cd9e8012a0346a37b}{i}}=0; \mbox{\hyperlink{0003-_b_u_z_z_e_r_2examples_2_t_e_s_t__0_2_t_e_s_t__0_8ino_a752abcfe7ce5874cd9e8012a0346a37b}{i}}<20; \mbox{\hyperlink{0003-_b_u_z_z_e_r_2examples_2_t_e_s_t__0_2_t_e_s_t__0_8ino_a752abcfe7ce5874cd9e8012a0346a37b}{i}}++) \{}
\DoxyCodeLine{\Hypertarget{_emulate_e_e_p_r_o_m_8ino_source_l00022}00022       \mbox{\hyperlink{batt___flash_as_e_e_p_r_o_m_8cpp_a8c17b9f346b7ef4b4c79d467de251bec}{EEPROM}}.\mbox{\hyperlink{class_e_e_p_r_o_m_class_a8ebe57942be10984c8fb6ed4b55fe69d}{write}}(\mbox{\hyperlink{0003-_b_u_z_z_e_r_2examples_2_t_e_s_t__0_2_t_e_s_t__0_8ino_a752abcfe7ce5874cd9e8012a0346a37b}{i}}, 100+\mbox{\hyperlink{0003-_b_u_z_z_e_r_2examples_2_t_e_s_t__0_2_t_e_s_t__0_8ino_a752abcfe7ce5874cd9e8012a0346a37b}{i}});}
\DoxyCodeLine{\Hypertarget{_emulate_e_e_p_r_o_m_8ino_source_l00023}00023       Serial.print(\textcolor{stringliteral}{"{} "{}});}
\DoxyCodeLine{\Hypertarget{_emulate_e_e_p_r_o_m_8ino_source_l00024}00024       Serial.print(100+\mbox{\hyperlink{0003-_b_u_z_z_e_r_2examples_2_t_e_s_t__0_2_t_e_s_t__0_8ino_a752abcfe7ce5874cd9e8012a0346a37b}{i}});}
\DoxyCodeLine{\Hypertarget{_emulate_e_e_p_r_o_m_8ino_source_l00025}00025     \}}
\DoxyCodeLine{\Hypertarget{_emulate_e_e_p_r_o_m_8ino_source_l00026}00026     Serial.println();}
\DoxyCodeLine{\Hypertarget{_emulate_e_e_p_r_o_m_8ino_source_l00027}00027 }
\DoxyCodeLine{\Hypertarget{_emulate_e_e_p_r_o_m_8ino_source_l00028}00028     \textcolor{comment}{// commit() saves all the changes to EEPROM, it must be called}}
\DoxyCodeLine{\Hypertarget{_emulate_e_e_p_r_o_m_8ino_source_l00029}00029     \textcolor{comment}{// every time the content of virtual EEPROM is changed to make}}
\DoxyCodeLine{\Hypertarget{_emulate_e_e_p_r_o_m_8ino_source_l00030}00030     \textcolor{comment}{// the change permanent.}}
\DoxyCodeLine{\Hypertarget{_emulate_e_e_p_r_o_m_8ino_source_l00031}00031     \textcolor{comment}{// This operation burns Flash write cycles and should not be}}
\DoxyCodeLine{\Hypertarget{_emulate_e_e_p_r_o_m_8ino_source_l00032}00032     \textcolor{comment}{// done too often. See readme for details:}}
\DoxyCodeLine{\Hypertarget{_emulate_e_e_p_r_o_m_8ino_source_l00033}00033     \textcolor{comment}{// https://github.com/cmaglie/FlashStorage\#limited-\/number-\/of-\/writes}}
\DoxyCodeLine{\Hypertarget{_emulate_e_e_p_r_o_m_8ino_source_l00034}00034     \mbox{\hyperlink{batt___flash_as_e_e_p_r_o_m_8cpp_a8c17b9f346b7ef4b4c79d467de251bec}{EEPROM}}.\mbox{\hyperlink{class_e_e_p_r_o_m_class_aa5c8b05b0e23c925f80a57b9bf5118c1}{commit}}();}
\DoxyCodeLine{\Hypertarget{_emulate_e_e_p_r_o_m_8ino_source_l00035}00035     Serial.println(\textcolor{stringliteral}{"{}Done!"{}});}
\DoxyCodeLine{\Hypertarget{_emulate_e_e_p_r_o_m_8ino_source_l00036}00036 }
\DoxyCodeLine{\Hypertarget{_emulate_e_e_p_r_o_m_8ino_source_l00037}00037     Serial.print(\textcolor{stringliteral}{"{}After commit, calling isValid() returns "{}});}
\DoxyCodeLine{\Hypertarget{_emulate_e_e_p_r_o_m_8ino_source_l00038}00038     Serial.println(\mbox{\hyperlink{batt___flash_as_e_e_p_r_o_m_8cpp_a8c17b9f346b7ef4b4c79d467de251bec}{EEPROM}}.\mbox{\hyperlink{class_e_e_p_r_o_m_class_a450c24cc5879179cd3a821719456dad2}{isValid}}());}
\DoxyCodeLine{\Hypertarget{_emulate_e_e_p_r_o_m_8ino_source_l00039}00039 }
\DoxyCodeLine{\Hypertarget{_emulate_e_e_p_r_o_m_8ino_source_l00040}00040   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{_emulate_e_e_p_r_o_m_8ino_source_l00041}00041 }
\DoxyCodeLine{\Hypertarget{_emulate_e_e_p_r_o_m_8ino_source_l00042}00042     Serial.println(\textcolor{stringliteral}{"{}EEPROM has been written."{}});}
\DoxyCodeLine{\Hypertarget{_emulate_e_e_p_r_o_m_8ino_source_l00043}00043     Serial.println(\textcolor{stringliteral}{"{}Here is the content of the first 20 bytes:"{}});}
\DoxyCodeLine{\Hypertarget{_emulate_e_e_p_r_o_m_8ino_source_l00044}00044 }
\DoxyCodeLine{\Hypertarget{_emulate_e_e_p_r_o_m_8ino_source_l00045}00045     Serial.print(\textcolor{stringliteral}{"{}-\/>"{}});}
\DoxyCodeLine{\Hypertarget{_emulate_e_e_p_r_o_m_8ino_source_l00046}00046     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \mbox{\hyperlink{0003-_b_u_z_z_e_r_2examples_2_t_e_s_t__0_2_t_e_s_t__0_8ino_a752abcfe7ce5874cd9e8012a0346a37b}{i}}=0; \mbox{\hyperlink{0003-_b_u_z_z_e_r_2examples_2_t_e_s_t__0_2_t_e_s_t__0_8ino_a752abcfe7ce5874cd9e8012a0346a37b}{i}}<20; \mbox{\hyperlink{0003-_b_u_z_z_e_r_2examples_2_t_e_s_t__0_2_t_e_s_t__0_8ino_a752abcfe7ce5874cd9e8012a0346a37b}{i}}++) \{}
\DoxyCodeLine{\Hypertarget{_emulate_e_e_p_r_o_m_8ino_source_l00047}00047       Serial.print(\textcolor{stringliteral}{"{} "{}});}
\DoxyCodeLine{\Hypertarget{_emulate_e_e_p_r_o_m_8ino_source_l00048}00048       Serial.print(\mbox{\hyperlink{batt___flash_as_e_e_p_r_o_m_8cpp_a8c17b9f346b7ef4b4c79d467de251bec}{EEPROM}}.\mbox{\hyperlink{class_e_e_p_r_o_m_class_aa504020e188bc95dc1d555c6dc254d28}{read}}(\mbox{\hyperlink{0003-_b_u_z_z_e_r_2examples_2_t_e_s_t__0_2_t_e_s_t__0_8ino_a752abcfe7ce5874cd9e8012a0346a37b}{i}}));}
\DoxyCodeLine{\Hypertarget{_emulate_e_e_p_r_o_m_8ino_source_l00049}00049     \}}
\DoxyCodeLine{\Hypertarget{_emulate_e_e_p_r_o_m_8ino_source_l00050}00050     Serial.println();}
\DoxyCodeLine{\Hypertarget{_emulate_e_e_p_r_o_m_8ino_source_l00051}00051 }
\DoxyCodeLine{\Hypertarget{_emulate_e_e_p_r_o_m_8ino_source_l00052}00052   \}}
\DoxyCodeLine{\Hypertarget{_emulate_e_e_p_r_o_m_8ino_source_l00053}00053 \}}
\DoxyCodeLine{\Hypertarget{_emulate_e_e_p_r_o_m_8ino_source_l00054}00054 }
\DoxyCodeLine{\Hypertarget{_emulate_e_e_p_r_o_m_8ino_source_l00055}\mbox{\hyperlink{_emulate_e_e_p_r_o_m_8ino_afe461d27b9c48d5921c00d521181f12f}{00055}} \textcolor{keywordtype}{void} \mbox{\hyperlink{_emulate_e_e_p_r_o_m_8ino_afe461d27b9c48d5921c00d521181f12f}{loop}}() \{}
\DoxyCodeLine{\Hypertarget{_emulate_e_e_p_r_o_m_8ino_source_l00056}00056 \}}

\end{DoxyCode}
