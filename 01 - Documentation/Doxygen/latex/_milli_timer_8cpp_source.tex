\hypertarget{_milli_timer_8cpp_source}{}\doxysection{Milli\+Timer.\+cpp}
\label{_milli_timer_8cpp_source}\index{C:/Users/Javi/Team Dropbox/Javi Rodriguez/Workspace/2-\/PROYECTOS/Bitbucket/03-\/Battery Pack/bat\_sw/LIBRARIES/0014-\/MilliTimer/MilliTimer.cpp@{C:/Users/Javi/Team Dropbox/Javi Rodriguez/Workspace/2-\/PROYECTOS/Bitbucket/03-\/Battery Pack/bat\_sw/LIBRARIES/0014-\/MilliTimer/MilliTimer.cpp}}
\mbox{\hyperlink{_milli_timer_8cpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_milli_timer_8cpp_source_l00001}00001 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_milli_timer_8h}{MilliTimer.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_milli_timer_8cpp_source_l00002}00002 }
\DoxyCodeLine{\Hypertarget{_milli_timer_8cpp_source_l00003}00003 }
\DoxyCodeLine{\Hypertarget{_milli_timer_8cpp_source_l00004}\mbox{\hyperlink{class_milli_timer_a7db6330ee7f1551b88a324fce593f8aa}{00004}} \textcolor{keywordtype}{byte} \mbox{\hyperlink{class_milli_timer_a7db6330ee7f1551b88a324fce593f8aa}{MilliTimer::poll}}(word ms)}
\DoxyCodeLine{\Hypertarget{_milli_timer_8cpp_source_l00005}00005 \{}
\DoxyCodeLine{\Hypertarget{_milli_timer_8cpp_source_l00006}00006     \textcolor{keywordtype}{byte} ready = 0;}
\DoxyCodeLine{\Hypertarget{_milli_timer_8cpp_source_l00007}00007     \textcolor{keywordflow}{if} (armed)}
\DoxyCodeLine{\Hypertarget{_milli_timer_8cpp_source_l00008}00008     \{}
\DoxyCodeLine{\Hypertarget{_milli_timer_8cpp_source_l00009}00009         word remain = next -\/ millis();}
\DoxyCodeLine{\Hypertarget{_milli_timer_8cpp_source_l00010}00010         \textcolor{comment}{// since remain is unsigned, it will overflow to large values when}}
\DoxyCodeLine{\Hypertarget{_milli_timer_8cpp_source_l00011}00011         \textcolor{comment}{// the timeout is reached, so this test works as long as poll() is}}
\DoxyCodeLine{\Hypertarget{_milli_timer_8cpp_source_l00012}00012         \textcolor{comment}{// called no later than 5535 millisecs after the timer has expired}}
\DoxyCodeLine{\Hypertarget{_milli_timer_8cpp_source_l00013}00013         \textcolor{keywordflow}{if} (remain <= 60000)}
\DoxyCodeLine{\Hypertarget{_milli_timer_8cpp_source_l00014}00014             \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{_milli_timer_8cpp_source_l00015}00015         \textcolor{comment}{// return a value between 1 and 255, being msecs+1 past expiration}}
\DoxyCodeLine{\Hypertarget{_milli_timer_8cpp_source_l00016}00016         \textcolor{comment}{// note: the actual return value is only reliable if poll() is}}
\DoxyCodeLine{\Hypertarget{_milli_timer_8cpp_source_l00017}00017         \textcolor{comment}{// called no later than 255 millisecs after the timer has expired}}
\DoxyCodeLine{\Hypertarget{_milli_timer_8cpp_source_l00018}00018         ready = -\/remain;}
\DoxyCodeLine{\Hypertarget{_milli_timer_8cpp_source_l00019}00019     \}}
\DoxyCodeLine{\Hypertarget{_milli_timer_8cpp_source_l00020}00020     \mbox{\hyperlink{class_milli_timer_ac0d67f165ee428193b07c7c3464e960e}{set}}(ms);}
\DoxyCodeLine{\Hypertarget{_milli_timer_8cpp_source_l00021}00021     \textcolor{keywordflow}{return} ready; \textcolor{comment}{// If check mut be with != 0 (done)  and == 0 not done}}
\DoxyCodeLine{\Hypertarget{_milli_timer_8cpp_source_l00022}00022 \}}
\DoxyCodeLine{\Hypertarget{_milli_timer_8cpp_source_l00023}00023 }
\DoxyCodeLine{\Hypertarget{_milli_timer_8cpp_source_l00024}\mbox{\hyperlink{class_milli_timer_a9a92bfde7d2f794fb4a6d6c0e9a5398c}{00024}} word \mbox{\hyperlink{class_milli_timer_a9a92bfde7d2f794fb4a6d6c0e9a5398c}{MilliTimer::remaining}}()\textcolor{keyword}{ const}}
\DoxyCodeLine{\Hypertarget{_milli_timer_8cpp_source_l00025}00025 \textcolor{keyword}{}\{}
\DoxyCodeLine{\Hypertarget{_milli_timer_8cpp_source_l00026}00026     word remain = armed ? next -\/ millis() : 0;}
\DoxyCodeLine{\Hypertarget{_milli_timer_8cpp_source_l00027}00027     \textcolor{keywordflow}{return} remain <= 60000 ? remain : 0;}
\DoxyCodeLine{\Hypertarget{_milli_timer_8cpp_source_l00028}00028 \}}
\DoxyCodeLine{\Hypertarget{_milli_timer_8cpp_source_l00029}00029 }
\DoxyCodeLine{\Hypertarget{_milli_timer_8cpp_source_l00030}\mbox{\hyperlink{class_milli_timer_ac0d67f165ee428193b07c7c3464e960e}{00030}} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_milli_timer_ac0d67f165ee428193b07c7c3464e960e}{MilliTimer::set}}(word ms)}
\DoxyCodeLine{\Hypertarget{_milli_timer_8cpp_source_l00031}00031 \{}
\DoxyCodeLine{\Hypertarget{_milli_timer_8cpp_source_l00032}00032     armed = ms != 0;}
\DoxyCodeLine{\Hypertarget{_milli_timer_8cpp_source_l00033}00033     \textcolor{keywordflow}{if} (armed)}
\DoxyCodeLine{\Hypertarget{_milli_timer_8cpp_source_l00034}00034         next = millis() + ms -\/ 1;}
\DoxyCodeLine{\Hypertarget{_milli_timer_8cpp_source_l00035}00035 \}}

\end{DoxyCode}
