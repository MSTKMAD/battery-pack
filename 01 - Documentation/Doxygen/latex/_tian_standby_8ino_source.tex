\hypertarget{_tian_standby_8ino_source}{}\doxysection{Tian\+Standby.\+ino}
\label{_tian_standby_8ino_source}\index{C:/Users/Javi/Team Dropbox/Javi Rodriguez/Workspace/2-\/PROYECTOS/Bitbucket/03-\/Battery Pack/bat\_sw/LIBRARIES/0009-\/LOWPOWER/examples/TianStandby/TianStandby.ino@{C:/Users/Javi/Team Dropbox/Javi Rodriguez/Workspace/2-\/PROYECTOS/Bitbucket/03-\/Battery Pack/bat\_sw/LIBRARIES/0009-\/LOWPOWER/examples/TianStandby/TianStandby.ino}}
\mbox{\hyperlink{_tian_standby_8ino}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_tian_standby_8ino_source_l00001}00001 \textcolor{comment}{/*}}
\DoxyCodeLine{\Hypertarget{_tian_standby_8ino_source_l00002}00002 \textcolor{comment}{  TianStandby}}
\DoxyCodeLine{\Hypertarget{_tian_standby_8ino_source_l00003}00003 \textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{_tian_standby_8ino_source_l00004}00004 \textcolor{comment}{  This sketch demonstrates the usage of SAMD chip to furtherly reduce the power usage of Tian}}
\DoxyCodeLine{\Hypertarget{_tian_standby_8ino_source_l00005}00005 \textcolor{comment}{  board. This method can be applied to any board with companion chips which expose a method }}
\DoxyCodeLine{\Hypertarget{_tian_standby_8ino_source_l00006}00006 \textcolor{comment}{  (via direct pin interrupt or via a command) to enter and exit standby.}}
\DoxyCodeLine{\Hypertarget{_tian_standby_8ino_source_l00007}00007 \textcolor{comment}{  Sleep modes allow a significant drop in the power usage of a board while it does nothing waiting for an event to happen. Battery powered application can take advantage of these modes to enhance battery life significantly.}}
\DoxyCodeLine{\Hypertarget{_tian_standby_8ino_source_l00008}00008 \textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{_tian_standby_8ino_source_l00009}00009 \textcolor{comment}{  In this sketch, the internal RTC of SAMD chip will wake up the processor every 20 seconds.}}
\DoxyCodeLine{\Hypertarget{_tian_standby_8ino_source_l00010}00010 \textcolor{comment}{  Before going to sleep, the SAMD chip tells the MIPS CPU to standby too.}}
\DoxyCodeLine{\Hypertarget{_tian_standby_8ino_source_l00011}00011 \textcolor{comment}{  Please note that, if the processor is sleeping, a new sketch can't be uploaded. To overcome this, manually reset the board (usually with a single or double tap to the RESET button)}}
\DoxyCodeLine{\Hypertarget{_tian_standby_8ino_source_l00012}00012 \textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{_tian_standby_8ino_source_l00013}00013 \textcolor{comment}{  This example code is in the public domain.}}
\DoxyCodeLine{\Hypertarget{_tian_standby_8ino_source_l00014}00014 \textcolor{comment}{*/}}
\DoxyCodeLine{\Hypertarget{_tian_standby_8ino_source_l00015}00015 }
\DoxyCodeLine{\Hypertarget{_tian_standby_8ino_source_l00016}00016 \textcolor{preprocessor}{\#include "{}ArduinoLowPower.h"{}}}
\DoxyCodeLine{\Hypertarget{_tian_standby_8ino_source_l00017}00017 }
\DoxyCodeLine{\Hypertarget{_tian_standby_8ino_source_l00018}\mbox{\hyperlink{_tian_standby_8ino_a650eb33a3c4a37aa26cec4a9d19869d0}{00018}} \textcolor{preprocessor}{\#define MIPS\_PIN 32 }}
\DoxyCodeLine{\Hypertarget{_tian_standby_8ino_source_l00019}00019 }
\DoxyCodeLine{\Hypertarget{_tian_standby_8ino_source_l00020}\mbox{\hyperlink{_tian_standby_8ino_a8b8b2594ca74b4cbd35ea5815975674e}{00020}} \textcolor{keywordtype}{void} \mbox{\hyperlink{_tian_standby_8ino_a8b8b2594ca74b4cbd35ea5815975674e}{MipsPM}}(\textcolor{keywordtype}{bool} sleep) \{}
\DoxyCodeLine{\Hypertarget{_tian_standby_8ino_source_l00021}00021   pinMode(\mbox{\hyperlink{_tian_standby_8ino_a650eb33a3c4a37aa26cec4a9d19869d0}{MIPS\_PIN}}, OUTPUT);}
\DoxyCodeLine{\Hypertarget{_tian_standby_8ino_source_l00022}00022   digitalWrite(\mbox{\hyperlink{_tian_standby_8ino_a650eb33a3c4a37aa26cec4a9d19869d0}{MIPS\_PIN}}, sleep ? LOW: HIGH);}
\DoxyCodeLine{\Hypertarget{_tian_standby_8ino_source_l00023}00023 \}}
\DoxyCodeLine{\Hypertarget{_tian_standby_8ino_source_l00024}00024 }
\DoxyCodeLine{\Hypertarget{_tian_standby_8ino_source_l00025}\mbox{\hyperlink{_tian_standby_8ino_a4fc01d736fe50cf5b977f755b675f11d}{00025}} \textcolor{keywordtype}{void} \mbox{\hyperlink{_tian_standby_8ino_a4fc01d736fe50cf5b977f755b675f11d}{setup}}() \{}
\DoxyCodeLine{\Hypertarget{_tian_standby_8ino_source_l00026}00026   pinMode(LED\_BUILTIN, OUTPUT);}
\DoxyCodeLine{\Hypertarget{_tian_standby_8ino_source_l00027}00027   \mbox{\hyperlink{batt___arduino_low_power_8h_a566fc2e3beba9d653cbee91092a0b3a8}{LowPower}}.companionLowPowerCallback(\mbox{\hyperlink{_tian_standby_8ino_a8b8b2594ca74b4cbd35ea5815975674e}{MipsPM}});}
\DoxyCodeLine{\Hypertarget{_tian_standby_8ino_source_l00028}00028   \textcolor{comment}{// Uncomment this function if you wish to attach function dummy when RTC wakes up the chip}}
\DoxyCodeLine{\Hypertarget{_tian_standby_8ino_source_l00029}00029   \mbox{\hyperlink{batt___arduino_low_power_8h_a566fc2e3beba9d653cbee91092a0b3a8}{LowPower}}.\mbox{\hyperlink{class_arduino_low_power_class_a4d526011d83fdbcd4c85b65658c36ab7}{attachInterruptWakeup}}(\mbox{\hyperlink{batt___arduino_low_power_8h_a37c6bf46f7f38bcc9f39fc2f9cef8037}{RTC\_ALARM\_WAKEUP}}, \mbox{\hyperlink{_tian_standby_8ino_a6a5e92e2098ad35ec6d5bb06e745d541}{onWakeup}}, CHANGE);}
\DoxyCodeLine{\Hypertarget{_tian_standby_8ino_source_l00030}00030 \}}
\DoxyCodeLine{\Hypertarget{_tian_standby_8ino_source_l00031}00031 }
\DoxyCodeLine{\Hypertarget{_tian_standby_8ino_source_l00032}\mbox{\hyperlink{_tian_standby_8ino_afe461d27b9c48d5921c00d521181f12f}{00032}} \textcolor{keywordtype}{void} \mbox{\hyperlink{_tian_standby_8ino_afe461d27b9c48d5921c00d521181f12f}{loop}}() \{}
\DoxyCodeLine{\Hypertarget{_tian_standby_8ino_source_l00033}00033   digitalWrite(LED\_BUILTIN, HIGH);}
\DoxyCodeLine{\Hypertarget{_tian_standby_8ino_source_l00034}00034   delay(500);}
\DoxyCodeLine{\Hypertarget{_tian_standby_8ino_source_l00035}00035   digitalWrite(LED\_BUILTIN, LOW);}
\DoxyCodeLine{\Hypertarget{_tian_standby_8ino_source_l00036}00036   delay(500);}
\DoxyCodeLine{\Hypertarget{_tian_standby_8ino_source_l00037}00037   \textcolor{comment}{// Triggers a 2000 ms sleep (the device will be woken up only by the registered wakeup sources and by internal RTC)}}
\DoxyCodeLine{\Hypertarget{_tian_standby_8ino_source_l00038}00038   \textcolor{comment}{// The power consumption of the chip will drop consistently}}
\DoxyCodeLine{\Hypertarget{_tian_standby_8ino_source_l00039}00039   \textcolor{comment}{// Send sleep command to MIPS CPU and then go to sleep}}
\DoxyCodeLine{\Hypertarget{_tian_standby_8ino_source_l00040}00040   \mbox{\hyperlink{batt___arduino_low_power_8h_a566fc2e3beba9d653cbee91092a0b3a8}{LowPower}}.companionSleep();}
\DoxyCodeLine{\Hypertarget{_tian_standby_8ino_source_l00041}00041   \mbox{\hyperlink{batt___arduino_low_power_8h_a566fc2e3beba9d653cbee91092a0b3a8}{LowPower}}.\mbox{\hyperlink{class_arduino_low_power_class_abba69e9cc0570392d3b2da783dd05b70}{sleep}}(20000);}
\DoxyCodeLine{\Hypertarget{_tian_standby_8ino_source_l00042}00042 \}}
\DoxyCodeLine{\Hypertarget{_tian_standby_8ino_source_l00043}00043 }
\DoxyCodeLine{\Hypertarget{_tian_standby_8ino_source_l00044}\mbox{\hyperlink{_tian_standby_8ino_a6a5e92e2098ad35ec6d5bb06e745d541}{00044}} \textcolor{keywordtype}{void} \mbox{\hyperlink{_tian_standby_8ino_a6a5e92e2098ad35ec6d5bb06e745d541}{onWakeup}}() \{}
\DoxyCodeLine{\Hypertarget{_tian_standby_8ino_source_l00045}00045   \textcolor{comment}{// This function will be called once on device wakeup}}
\DoxyCodeLine{\Hypertarget{_tian_standby_8ino_source_l00046}00046   \textcolor{comment}{// You can do some little operations here (like changing variables which will be used in the loop)}}
\DoxyCodeLine{\Hypertarget{_tian_standby_8ino_source_l00047}00047   \textcolor{comment}{// Remember to avoid calling delay() and long running functions since this functions executes in interrupt context}}
\DoxyCodeLine{\Hypertarget{_tian_standby_8ino_source_l00048}00048 }
\DoxyCodeLine{\Hypertarget{_tian_standby_8ino_source_l00049}00049   \textcolor{comment}{// Wakeup the companion chip, too}}
\DoxyCodeLine{\Hypertarget{_tian_standby_8ino_source_l00050}00050   \mbox{\hyperlink{batt___arduino_low_power_8h_a566fc2e3beba9d653cbee91092a0b3a8}{LowPower}}.companionWakeup();}
\DoxyCodeLine{\Hypertarget{_tian_standby_8ino_source_l00051}00051 \}}

\end{DoxyCode}
