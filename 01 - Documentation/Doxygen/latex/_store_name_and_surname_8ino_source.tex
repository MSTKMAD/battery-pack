\hypertarget{_store_name_and_surname_8ino_source}{}\doxysection{Store\+Name\+And\+Surname.\+ino}
\label{_store_name_and_surname_8ino_source}\index{C:/Users/Javi/Team Dropbox/Javi Rodriguez/Workspace/2-\/PROYECTOS/Bitbucket/03-\/Battery Pack/bat\_sw/LIBRARIES/0012-\/batt\_FlashStorage/examples/StoreNameAndSurname/StoreNameAndSurname.ino@{C:/Users/Javi/Team Dropbox/Javi Rodriguez/Workspace/2-\/PROYECTOS/Bitbucket/03-\/Battery Pack/bat\_sw/LIBRARIES/0012-\/batt\_FlashStorage/examples/StoreNameAndSurname/StoreNameAndSurname.ino}}
\mbox{\hyperlink{_store_name_and_surname_8ino}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00001}00001 \textcolor{comment}{/*}}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00002}00002 \textcolor{comment}{  Store and retrieve structured data in Flash memory.}}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00003}00003 \textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00004}00004 \textcolor{comment}{  This example code is in the public domain.}}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00005}00005 \textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00006}00006 \textcolor{comment}{  Written 30 Apr 2015 by Cristian Maglie}}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00007}00007 \textcolor{comment}{*/}}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00008}00008 }
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00009}00009 \textcolor{preprocessor}{\#include <FlashStorage.h>}}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00010}00010 }
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00011}00011 \textcolor{comment}{// Create a structure that is big enough to contain a name}}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00012}00012 \textcolor{comment}{// and a surname. The "{}valid"{} variable is set to "{}true"{} once}}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00013}00013 \textcolor{comment}{// the structure is filled with actual data for the first time.}}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00014}\mbox{\hyperlink{struct_person}{00014}} \textcolor{keyword}{typedef} \textcolor{keyword}{struct }\{}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00015}\mbox{\hyperlink{struct_person_ae83b322d46d44f38014ca2778ca37738}{00015}}   \textcolor{keywordtype}{boolean} \mbox{\hyperlink{struct_person_ae83b322d46d44f38014ca2778ca37738}{valid}};}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00016}\mbox{\hyperlink{struct_person_ae6ea8a763f5ab3a11168c44e1c2a0f00}{00016}}   \textcolor{keywordtype}{char} name[100];}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00017}\mbox{\hyperlink{struct_person_ab27c0bf6f3cf6b79785598f056b7701e}{00017}}   \textcolor{keywordtype}{char} surname[100];}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00018}00018 \} \mbox{\hyperlink{struct_person}{Person}};}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00019}00019 }
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00020}00020 \textcolor{comment}{// Reserve a portion of flash memory to store a "{}Person"{} and}}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00021}00021 \textcolor{comment}{// call it "{}my\_flash\_store"{}.}}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00022}\mbox{\hyperlink{_store_name_and_surname_8ino_a462ab107111f07cdc433e46726c6d8e3}{00022}} \mbox{\hyperlink{_store_name_and_surname_8ino_a462ab107111f07cdc433e46726c6d8e3}{FlashStorage}}(my\_flash\_store, \mbox{\hyperlink{struct_person}{Person}});}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00023}00023 }
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00024}00024 \textcolor{comment}{// Note: the area of flash memory reserved lost every time}}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00025}00025 \textcolor{comment}{// the sketch is uploaded on the board.}}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00026}00026 }
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00027}\mbox{\hyperlink{_store_name_and_surname_8ino_a4fc01d736fe50cf5b977f755b675f11d}{00027}} \textcolor{keywordtype}{void} \mbox{\hyperlink{_store_name_and_surname_8ino_a4fc01d736fe50cf5b977f755b675f11d}{setup}}() \{}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00028}00028   SERIAL\_PORT\_MONITOR.begin(9600);}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00029}00029   \textcolor{keywordflow}{while} (!SERIAL\_PORT\_MONITOR) \{ \}}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00030}00030 }
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00031}00031   \textcolor{comment}{// Create a "{}Person"{} variable and call it "{}owner"{}}}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00032}00032   \mbox{\hyperlink{struct_person}{Person}} owner;}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00033}00033 }
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00034}00034   \textcolor{comment}{// Read the content of "{}my\_flash\_store"{} into the "{}owner"{} variable}}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00035}00035   owner = my\_flash\_store.read();}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00036}00036 }
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00037}00037   \textcolor{comment}{// If this is the first run the "{}valid"{} value should be "{}false"{}...}}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00038}00038   \textcolor{keywordflow}{if} (owner.\mbox{\hyperlink{struct_person_ae83b322d46d44f38014ca2778ca37738}{valid}} == \textcolor{keyword}{false}) \{}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00039}00039 }
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00040}00040     \textcolor{comment}{// ...in this case we ask for user data.}}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00041}00041     SERIAL\_PORT\_MONITOR.setTimeout(30000);}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00042}00042     SERIAL\_PORT\_MONITOR.println(\textcolor{stringliteral}{"{}Insert your name:"{}});}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00043}00043     String name = SERIAL\_PORT\_MONITOR.readStringUntil(\textcolor{charliteral}{'\(\backslash\)n'});}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00044}00044     SERIAL\_PORT\_MONITOR.println(\textcolor{stringliteral}{"{}Insert your surname:"{}});}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00045}00045     String surname = SERIAL\_PORT\_MONITOR.readStringUntil(\textcolor{charliteral}{'\(\backslash\)n'});}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00046}00046 }
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00047}00047     \textcolor{comment}{// Fill the "{}owner"{} structure with the data entered by the user...}}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00048}00048     name.toCharArray(owner.\mbox{\hyperlink{struct_person_ae6ea8a763f5ab3a11168c44e1c2a0f00}{name}}, 100);}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00049}00049     surname.toCharArray(owner.\mbox{\hyperlink{struct_person_ab27c0bf6f3cf6b79785598f056b7701e}{surname}}, 100);}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00050}00050     \textcolor{comment}{// set "{}valid"{} to true, so the next time we know that we}}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00051}00051     \textcolor{comment}{// have valid data inside}}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00052}00052     owner.\mbox{\hyperlink{struct_person_ae83b322d46d44f38014ca2778ca37738}{valid}} = \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00053}00053 }
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00054}00054     \textcolor{comment}{// ...and finally save everything into "{}my\_flash\_store"{}}}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00055}00055     my\_flash\_store.write(owner);}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00056}00056 }
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00057}00057     \textcolor{comment}{// Print a confirmation of the data inserted.}}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00058}00058     SERIAL\_PORT\_MONITOR.println();}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00059}00059     SERIAL\_PORT\_MONITOR.print(\textcolor{stringliteral}{"{}Your name: "{}});}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00060}00060     SERIAL\_PORT\_MONITOR.println(owner.\mbox{\hyperlink{struct_person_ae6ea8a763f5ab3a11168c44e1c2a0f00}{name}});}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00061}00061     SERIAL\_PORT\_MONITOR.print(\textcolor{stringliteral}{"{}and your surname: "{}});}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00062}00062     SERIAL\_PORT\_MONITOR.println(owner.\mbox{\hyperlink{struct_person_ab27c0bf6f3cf6b79785598f056b7701e}{surname}});}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00063}00063     SERIAL\_PORT\_MONITOR.println(\textcolor{stringliteral}{"{}have been saved. Thank you!"{}});}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00064}00064 }
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00065}00065   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00066}00066 }
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00067}00067     \textcolor{comment}{// Say hello to the returning user!}}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00068}00068     SERIAL\_PORT\_MONITOR.println();}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00069}00069     SERIAL\_PORT\_MONITOR.print(\textcolor{stringliteral}{"{}Hi "{}});}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00070}00070     SERIAL\_PORT\_MONITOR.print(owner.\mbox{\hyperlink{struct_person_ae6ea8a763f5ab3a11168c44e1c2a0f00}{name}});}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00071}00071     SERIAL\_PORT\_MONITOR.print(\textcolor{stringliteral}{"{} "{}});}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00072}00072     SERIAL\_PORT\_MONITOR.print(owner.\mbox{\hyperlink{struct_person_ab27c0bf6f3cf6b79785598f056b7701e}{surname}});}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00073}00073     SERIAL\_PORT\_MONITOR.println(\textcolor{stringliteral}{"{}, nice to see you again :-\/)"{}});}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00074}00074 }
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00075}00075   \}}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00076}00076 \}}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00077}00077 }
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00078}\mbox{\hyperlink{_store_name_and_surname_8ino_afe461d27b9c48d5921c00d521181f12f}{00078}} \textcolor{keywordtype}{void} \mbox{\hyperlink{_store_name_and_surname_8ino_afe461d27b9c48d5921c00d521181f12f}{loop}}() \{}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00079}00079   \textcolor{comment}{// Do nothing...}}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00080}00080 \}}
\DoxyCodeLine{\Hypertarget{_store_name_and_surname_8ino_source_l00081}00081 }

\end{DoxyCode}
